<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>Browser API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>Browser</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#!/usr/bin/env python3

import requests, os, json, gc, getpass

from bs4 import BeautifulSoup

from selenium import webdriver
from selenium.common.exceptions import NoSuchElementException
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities
from selenium.webdriver.common.by import By


class APIError(Exception):
    &#34;&#34;&#34;An API Error Exception&#34;&#34;&#34;

    def __init__(self, status, url):
        self.status = status
        self.url = url

    def __str__(self):
        return &#34;APIError: status={}\nURL:      {}&#34;.format(self.status, self.url)


class Browser:
    &#34;&#34;&#34;Base browser for Selenium assisted applications&#34;&#34;&#34;

    browser = None
    cookies = {}
    app = {}
    lastUrl = &#34;&#34;
    sessionBaseHeaders = None

    appInfo = {}

    def __init__(self):
        &#34;&#34;&#34;function to initiate the systems as needed&#34;&#34;&#34;
        # fetch variables from ENV
        from dotenv import load_dotenv

        load_dotenv()
        # ignore warnings, when SSL_IGNORE is set to true
        import os

        if os.getenv(&#34;SSL_IGNORE&#34;, &#34;False&#34;).lower() in [&#34;1&#34;, &#34;true&#34;, &#34;t&#34;, &#34;y&#34;, &#34;yes&#34;]:
            import urllib3

            urllib3.disable_warnings()
        # gather App info and start browser
        self.gatherAppInfo()
        self.startBrowser()

    def setCookies(self, cookieDict, url=None, returnSession=False, curl=True):
        &#34;&#34;&#34;helper function to set cookies on browser&#34;&#34;&#34;
        if url == None:
            url = self.app[&#34;url&#34;]
        # parsedUrl = urllib.parse.urlparse(url)
        # domain, path = [ parsedUrl.netloc, parsedUrl.path ]
        # if path == &#39;&#39;:
        #     path = &#39;/&#39;
        self.browser.get(url)
        for key, value in cookieDict.items():
            if os.getenv(&#34;PRINT_DEBUG_INFO&#34;, &#34;False&#34;).lower() in [&#34;1&#34;, &#34;true&#34;, &#34;t&#34;, &#34;y&#34;, &#34;yes&#34;]:
                print(&#34;Cookie is being set:&#34;)
                print({&#34;key&#34;: key, &#34;value&#34;: value})
                print()
            # # does no more work since Python / Selenium Cookies can only be set for loaded URLs anymore ...
            # self.browser.add_cookie( { &#34;name&#34;: key, &#34;value&#34;: value, &#34;domain&#34;: domain, &#34;path&#34;: path } )
            self.browser.add_cookie({&#34;name&#34;: key, &#34;value&#34;: value})
        self.browser.refresh()
        if returnSession:
            return self.toSession(curl=curl)

    def loadCookies(self, givenCookies=None, url=None):
        &#34;&#34;&#34;function to load cookies from JSON string ENV variable `COOKIES` – or a given Python dictionary&#34;&#34;&#34;
        if givenCookies == None:
            givenCookies = json.loads(os.getenv(&#34;COOKIES&#34;, &#34;{}&#34;))
        if len(givenCookies) &gt; 0:
            self.setCookies(givenCookies, url)

    def gatherAppInfo(self):
        &#34;&#34;&#34;
        function to set application information

        each `appInfo` has to be a dictionary with the following keys:
          * `env` (MANDATORY – name of the corresponding environmental variable)
          * `description` (MANDATORY – if the user is asked to enter the value, this information is shown)
          * `password` (OPTIONAL – default `False`; if set `True`, the potential user input is hidden)
          * `url` (OPTIONAL – default `False`; if set `True`, the `urlLastChar` is ensured to be last part of the value)
          * `urlLastChar` (OPTIONAL – default `/`)
          * `default` (OPTIONAL – default value for the app information; if set, the user won&#39;t be able to input the information)
        `appInfo` itself is also a dictionary and the key `url` is mandatory, the keys `user` and `passwd` are highly recommended.
        &#34;&#34;&#34;
        self.app = {}
        for key, config in self.appInfo.items():
            value = None
            # relevant for asking for a password
            if &#34;password&#34; not in config:
                config[&#34;password&#34;] = False
            # relevant for formatting urls
            if &#34;url&#34; not in config:
                config[&#34;url&#34;] = False
            # relevant for formatting urls
            if &#34;urlLastChar&#34; not in config:
                config[&#34;urlLastChar&#34;] = &#34;/&#34;
            # relevant if there is a default value for this
            # setting in the specific browser
            if &#34;default&#34; not in config:
                config[&#34;default&#34;] = None
            # check for config
            if &#34;env&#34; in config:
                value = os.getenv(config[&#34;env&#34;], config[&#34;default&#34;])
            # ensure value not None
            if value == None:
                # ask for user input
                if config[&#34;password&#34;]:
                    value = getpass.getpass(&#34;{d}: &#34;.format(d=config[&#34;description&#34;]))
                else:
                    value = input(&#34;{d}: &#34;.format(d=config[&#34;description&#34;]))
            # adjust url
            if (
                config[&#34;url&#34;]
                and len(config[&#34;urlLastChar&#34;]) &gt; 0
                and value[-1] != config[&#34;urlLastChar&#34;]
            ):
                value += config[&#34;urlLastChar&#34;]
            # set value to app array
            self.app[key] = value

    def startBrowser(self, custom_capabilities={}):
        &#34;&#34;&#34;Start Selenium browser&#34;&#34;&#34;
        btype = os.getenv(&#34;SELENIUM_BROWSER_TYPE&#34;, &#34;FIREFOX&#34;)
        gridUrl = os.getenv(&#34;SELENIUM_GRID&#34;)

        if btype.lower() in [&#34;chrome&#34;]:
            capabilities = DesiredCapabilities.CHROME.copy()
        elif btype.lower() in [&#34;opera&#34;]:
            capabilities = DesiredCapabilities.OPERA.copy()
        elif btype.lower() in [&#34;safari&#34;]:
            capabilities = DesiredCapabilities.SAFARI.copy()
        else:
            capabilities = DesiredCapabilities.FIREFOX.copy()

        if os.getenv(&#34;SSL_IGNORE&#34;, &#34;False&#34;).lower() in [&#34;1&#34;, &#34;true&#34;, &#34;t&#34;, &#34;y&#34;, &#34;yes&#34;]:
            capabilities[&#34;acceptInsecureCerts&#34;] = True

        for key, value in custom_capabilities.items():
            capabilities[key] = value

        self.browser = webdriver.Remote(command_executor=gridUrl, desired_capabilities=capabilities)
        self.browser.set_script_timeout(os.getenv(&#34;SELENIUM_TIMEOUT&#34;, 30000))

    def checkElementByXpath(self, xpath):
        &#34;&#34;&#34;helper function to check if element (XPATH) exists on page&#34;&#34;&#34;
        try:
            self.browser.find_element(By.XPATH, xpath)
        except NoSuchElementException:
            return False
        return True

    def checkElementByID(self, ident):
        &#34;&#34;&#34;helper function to check if element (ID) exists on page&#34;&#34;&#34;
        try:
            self.browser.find_element(By.ID, ident)
        except NoSuchElementException:
            return False
        return True

    def sessionPostRequest(
        self,
        url,
        data,
        transferCookies=False,
        headers=None,
        curl=True,
        session=None,
        urlOverride=False,
    ):
        &#34;&#34;&#34;helper function to send POST request&#34;&#34;&#34;
        if session == None:
            session = self.toSession(curl=curl)
        headers = self.appendSessionHeaders(headers)
        if headers is not None:
            request = session.post(url, data=data, headers=headers)
        else:
            request = session.post(url, data=data)
        if transferCookies:
            # write Cookies from POST request to Selenium Browser
            new_cookies = session.cookies.get_dict()
            if urlOverride:
                self.get(url, login=False)
                self.setCookies(new_cookies, url=url)
            else:
                self.get(request.url, login=False)
                self.setCookies(new_cookies, url=request.url)
            self.refresh()
        return request

    def sessionPutRequest(
        self, url, data, transferCookies=False, headers=None, curl=True, session=None
    ):
        &#34;&#34;&#34;helper function to send PUT request&#34;&#34;&#34;
        if session == None:
            session = self.toSession(curl=curl)
        headers = self.appendSessionHeaders(headers)
        if headers is not None:
            request = session.put(url, data=data, headers=headers)
        else:
            request = session.put(url, data=data)
        if transferCookies:
            # write Cookies from POST request to Selenium Browser
            new_cookies = session.cookies.get_dict()
            self.get(request.url, login=False)
            self.setCookies(new_cookies)
            self.refresh()
        return request

    def sessionGetRequest(self, url, transferCookies=False, headers=None, curl=True, session=None):
        &#34;&#34;&#34;helper function to send GET request&#34;&#34;&#34;
        if session == None:
            session = self.toSession(curl=curl)
        headers = self.appendSessionHeaders(headers)
        if headers is not None:
            request = session.get(url, headers=headers)
        else:
            request = session.get(url)
        if transferCookies:
            # write Cookies from POST request to Selenium Browser
            new_cookies = session.cookies.get_dict()
            self.get(request.url, login=False)
            self.setCookies(new_cookies)
            self.refresh()
        return request

    def apiGetInfo(self, apiUrl, returnResponse=False, session=None, curl=True):
        &#34;&#34;&#34;Function to gather information from API URL – if `returnResponse` is True, the whole request response is returned, otherwise only the decoded answer object&#34;&#34;&#34;
        if session == None:
            session = self.toSession(curl=curl)
        rsp = session.get(apiUrl)
        if returnResponse:
            return rsp
        else:
            if rsp.status_code == 200:
                return json.loads(rsp.text)
            elif rsp.status_code == 404:
                return None
            else:
                raise Exception(
                    &#34;Error while API fetch:\n======================\n\nResponse Code: {rc}\n\n{body}&#34;.format(
                        rc=rsp.status_code, body=rsp.text
                    )
                )

    def appendSessionHeaders(self, headers=None):
        &#34;&#34;&#34;append session headers and retrieve them&#34;&#34;&#34;
        if headers is None:
            return self.sessionBaseHeaders
        else:
            for k, v in self.sessionBaseHeaders.items():
                if k not in headers:
                    headers[k] = v
            return headers

    def restoreCookies(self):
        &#34;&#34;&#34;Restore cookies on Browser&#34;&#34;&#34;
        for cookie in self.cookies:
            self.browser.add_cookie(cookie)

    def renew(self):
        &#34;&#34;&#34;Renew browser by closing and reopening it with restored Cookies&#34;&#34;&#34;
        try:
            self.browser.quit()
        except:
            pass
        self.startBrowser()
        self.browser.get(self.lastUrl)
        self.restoreCookies()

    def refresh(self):
        &#34;&#34;&#34;Reload page in Browser&#34;&#34;&#34;
        currentUrl = self.browser.current_url
        self.get(currentUrl)
        # self.browser.refresh() # bricks sessionPostRequest calls ...

    def get(self, url, login=True):
        &#34;&#34;&#34;Get url in Browser&#34;&#34;&#34;
        self.browser.get(url)
        if login and not self.checkLogin():
            self.login()
            self.browser.get(url)
        self.cookies = self.browser.get_cookies()
        self.lastUrl = url
        gc.collect()

    def toSession(self, curl=False):
        &#34;&#34;&#34;Return python session&#34;&#34;&#34;
        sessionObj = requests.session()
        if curl:
            agent = &#34;curl/7.54&#34;
        else:
            agent = self.browser.execute_script(&#34;return navigator.userAgent&#34;)
        sessionObj.headers = {&#34;User-Agent&#34;: agent}
        if len(self.cookies) &gt; 0:
            for c in self.cookies:
                sessionObj.cookies.set(c[&#34;name&#34;], c[&#34;value&#34;])
        if os.getenv(&#34;SSL_IGNORE&#34;, &#34;False&#34;).lower() in [&#34;1&#34;, &#34;true&#34;, &#34;t&#34;, &#34;y&#34;, &#34;yes&#34;]:
            sessionObj.verify = False
        return sessionObj

    def toSoup(self):
        &#34;&#34;&#34;get BeautifulSoup representation of currently loaded page&#34;&#34;&#34;
        return BeautifulSoup(self.browser.page_source, &#34;html.parser&#34;)

    def __del__(self):
        &#34;&#34;&#34;magic function to close the browser instance&#34;&#34;&#34;
        self.browser.quit()</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="Browser.APIError"><code class="flex name class">
<span>class <span class="ident">APIError</span></span>
<span>(</span><span>status, url)</span>
</code></dt>
<dd>
<div class="desc"><p>An API Error Exception</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class APIError(Exception):
    &#34;&#34;&#34;An API Error Exception&#34;&#34;&#34;

    def __init__(self, status, url):
        self.status = status
        self.url = url

    def __str__(self):
        return &#34;APIError: status={}\nURL:      {}&#34;.format(self.status, self.url)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
<dt id="Browser.Browser"><code class="flex name class">
<span>class <span class="ident">Browser</span></span>
</code></dt>
<dd>
<div class="desc"><p>Base browser for Selenium assisted applications</p>
<p>function to initiate the systems as needed</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Browser:
    &#34;&#34;&#34;Base browser for Selenium assisted applications&#34;&#34;&#34;

    browser = None
    cookies = {}
    app = {}
    lastUrl = &#34;&#34;
    sessionBaseHeaders = None

    appInfo = {}

    def __init__(self):
        &#34;&#34;&#34;function to initiate the systems as needed&#34;&#34;&#34;
        # fetch variables from ENV
        from dotenv import load_dotenv

        load_dotenv()
        # ignore warnings, when SSL_IGNORE is set to true
        import os

        if os.getenv(&#34;SSL_IGNORE&#34;, &#34;False&#34;).lower() in [&#34;1&#34;, &#34;true&#34;, &#34;t&#34;, &#34;y&#34;, &#34;yes&#34;]:
            import urllib3

            urllib3.disable_warnings()
        # gather App info and start browser
        self.gatherAppInfo()
        self.startBrowser()

    def setCookies(self, cookieDict, url=None, returnSession=False, curl=True):
        &#34;&#34;&#34;helper function to set cookies on browser&#34;&#34;&#34;
        if url == None:
            url = self.app[&#34;url&#34;]
        # parsedUrl = urllib.parse.urlparse(url)
        # domain, path = [ parsedUrl.netloc, parsedUrl.path ]
        # if path == &#39;&#39;:
        #     path = &#39;/&#39;
        self.browser.get(url)
        for key, value in cookieDict.items():
            if os.getenv(&#34;PRINT_DEBUG_INFO&#34;, &#34;False&#34;).lower() in [&#34;1&#34;, &#34;true&#34;, &#34;t&#34;, &#34;y&#34;, &#34;yes&#34;]:
                print(&#34;Cookie is being set:&#34;)
                print({&#34;key&#34;: key, &#34;value&#34;: value})
                print()
            # # does no more work since Python / Selenium Cookies can only be set for loaded URLs anymore ...
            # self.browser.add_cookie( { &#34;name&#34;: key, &#34;value&#34;: value, &#34;domain&#34;: domain, &#34;path&#34;: path } )
            self.browser.add_cookie({&#34;name&#34;: key, &#34;value&#34;: value})
        self.browser.refresh()
        if returnSession:
            return self.toSession(curl=curl)

    def loadCookies(self, givenCookies=None, url=None):
        &#34;&#34;&#34;function to load cookies from JSON string ENV variable `COOKIES` – or a given Python dictionary&#34;&#34;&#34;
        if givenCookies == None:
            givenCookies = json.loads(os.getenv(&#34;COOKIES&#34;, &#34;{}&#34;))
        if len(givenCookies) &gt; 0:
            self.setCookies(givenCookies, url)

    def gatherAppInfo(self):
        &#34;&#34;&#34;
        function to set application information

        each `appInfo` has to be a dictionary with the following keys:
          * `env` (MANDATORY – name of the corresponding environmental variable)
          * `description` (MANDATORY – if the user is asked to enter the value, this information is shown)
          * `password` (OPTIONAL – default `False`; if set `True`, the potential user input is hidden)
          * `url` (OPTIONAL – default `False`; if set `True`, the `urlLastChar` is ensured to be last part of the value)
          * `urlLastChar` (OPTIONAL – default `/`)
          * `default` (OPTIONAL – default value for the app information; if set, the user won&#39;t be able to input the information)
        `appInfo` itself is also a dictionary and the key `url` is mandatory, the keys `user` and `passwd` are highly recommended.
        &#34;&#34;&#34;
        self.app = {}
        for key, config in self.appInfo.items():
            value = None
            # relevant for asking for a password
            if &#34;password&#34; not in config:
                config[&#34;password&#34;] = False
            # relevant for formatting urls
            if &#34;url&#34; not in config:
                config[&#34;url&#34;] = False
            # relevant for formatting urls
            if &#34;urlLastChar&#34; not in config:
                config[&#34;urlLastChar&#34;] = &#34;/&#34;
            # relevant if there is a default value for this
            # setting in the specific browser
            if &#34;default&#34; not in config:
                config[&#34;default&#34;] = None
            # check for config
            if &#34;env&#34; in config:
                value = os.getenv(config[&#34;env&#34;], config[&#34;default&#34;])
            # ensure value not None
            if value == None:
                # ask for user input
                if config[&#34;password&#34;]:
                    value = getpass.getpass(&#34;{d}: &#34;.format(d=config[&#34;description&#34;]))
                else:
                    value = input(&#34;{d}: &#34;.format(d=config[&#34;description&#34;]))
            # adjust url
            if (
                config[&#34;url&#34;]
                and len(config[&#34;urlLastChar&#34;]) &gt; 0
                and value[-1] != config[&#34;urlLastChar&#34;]
            ):
                value += config[&#34;urlLastChar&#34;]
            # set value to app array
            self.app[key] = value

    def startBrowser(self, custom_capabilities={}):
        &#34;&#34;&#34;Start Selenium browser&#34;&#34;&#34;
        btype = os.getenv(&#34;SELENIUM_BROWSER_TYPE&#34;, &#34;FIREFOX&#34;)
        gridUrl = os.getenv(&#34;SELENIUM_GRID&#34;)

        if btype.lower() in [&#34;chrome&#34;]:
            capabilities = DesiredCapabilities.CHROME.copy()
        elif btype.lower() in [&#34;opera&#34;]:
            capabilities = DesiredCapabilities.OPERA.copy()
        elif btype.lower() in [&#34;safari&#34;]:
            capabilities = DesiredCapabilities.SAFARI.copy()
        else:
            capabilities = DesiredCapabilities.FIREFOX.copy()

        if os.getenv(&#34;SSL_IGNORE&#34;, &#34;False&#34;).lower() in [&#34;1&#34;, &#34;true&#34;, &#34;t&#34;, &#34;y&#34;, &#34;yes&#34;]:
            capabilities[&#34;acceptInsecureCerts&#34;] = True

        for key, value in custom_capabilities.items():
            capabilities[key] = value

        self.browser = webdriver.Remote(command_executor=gridUrl, desired_capabilities=capabilities)
        self.browser.set_script_timeout(os.getenv(&#34;SELENIUM_TIMEOUT&#34;, 30000))

    def checkElementByXpath(self, xpath):
        &#34;&#34;&#34;helper function to check if element (XPATH) exists on page&#34;&#34;&#34;
        try:
            self.browser.find_element(By.XPATH, xpath)
        except NoSuchElementException:
            return False
        return True

    def checkElementByID(self, ident):
        &#34;&#34;&#34;helper function to check if element (ID) exists on page&#34;&#34;&#34;
        try:
            self.browser.find_element(By.ID, ident)
        except NoSuchElementException:
            return False
        return True

    def sessionPostRequest(
        self,
        url,
        data,
        transferCookies=False,
        headers=None,
        curl=True,
        session=None,
        urlOverride=False,
    ):
        &#34;&#34;&#34;helper function to send POST request&#34;&#34;&#34;
        if session == None:
            session = self.toSession(curl=curl)
        headers = self.appendSessionHeaders(headers)
        if headers is not None:
            request = session.post(url, data=data, headers=headers)
        else:
            request = session.post(url, data=data)
        if transferCookies:
            # write Cookies from POST request to Selenium Browser
            new_cookies = session.cookies.get_dict()
            if urlOverride:
                self.get(url, login=False)
                self.setCookies(new_cookies, url=url)
            else:
                self.get(request.url, login=False)
                self.setCookies(new_cookies, url=request.url)
            self.refresh()
        return request

    def sessionPutRequest(
        self, url, data, transferCookies=False, headers=None, curl=True, session=None
    ):
        &#34;&#34;&#34;helper function to send PUT request&#34;&#34;&#34;
        if session == None:
            session = self.toSession(curl=curl)
        headers = self.appendSessionHeaders(headers)
        if headers is not None:
            request = session.put(url, data=data, headers=headers)
        else:
            request = session.put(url, data=data)
        if transferCookies:
            # write Cookies from POST request to Selenium Browser
            new_cookies = session.cookies.get_dict()
            self.get(request.url, login=False)
            self.setCookies(new_cookies)
            self.refresh()
        return request

    def sessionGetRequest(self, url, transferCookies=False, headers=None, curl=True, session=None):
        &#34;&#34;&#34;helper function to send GET request&#34;&#34;&#34;
        if session == None:
            session = self.toSession(curl=curl)
        headers = self.appendSessionHeaders(headers)
        if headers is not None:
            request = session.get(url, headers=headers)
        else:
            request = session.get(url)
        if transferCookies:
            # write Cookies from POST request to Selenium Browser
            new_cookies = session.cookies.get_dict()
            self.get(request.url, login=False)
            self.setCookies(new_cookies)
            self.refresh()
        return request

    def apiGetInfo(self, apiUrl, returnResponse=False, session=None, curl=True):
        &#34;&#34;&#34;Function to gather information from API URL – if `returnResponse` is True, the whole request response is returned, otherwise only the decoded answer object&#34;&#34;&#34;
        if session == None:
            session = self.toSession(curl=curl)
        rsp = session.get(apiUrl)
        if returnResponse:
            return rsp
        else:
            if rsp.status_code == 200:
                return json.loads(rsp.text)
            elif rsp.status_code == 404:
                return None
            else:
                raise Exception(
                    &#34;Error while API fetch:\n======================\n\nResponse Code: {rc}\n\n{body}&#34;.format(
                        rc=rsp.status_code, body=rsp.text
                    )
                )

    def appendSessionHeaders(self, headers=None):
        &#34;&#34;&#34;append session headers and retrieve them&#34;&#34;&#34;
        if headers is None:
            return self.sessionBaseHeaders
        else:
            for k, v in self.sessionBaseHeaders.items():
                if k not in headers:
                    headers[k] = v
            return headers

    def restoreCookies(self):
        &#34;&#34;&#34;Restore cookies on Browser&#34;&#34;&#34;
        for cookie in self.cookies:
            self.browser.add_cookie(cookie)

    def renew(self):
        &#34;&#34;&#34;Renew browser by closing and reopening it with restored Cookies&#34;&#34;&#34;
        try:
            self.browser.quit()
        except:
            pass
        self.startBrowser()
        self.browser.get(self.lastUrl)
        self.restoreCookies()

    def refresh(self):
        &#34;&#34;&#34;Reload page in Browser&#34;&#34;&#34;
        currentUrl = self.browser.current_url
        self.get(currentUrl)
        # self.browser.refresh() # bricks sessionPostRequest calls ...

    def get(self, url, login=True):
        &#34;&#34;&#34;Get url in Browser&#34;&#34;&#34;
        self.browser.get(url)
        if login and not self.checkLogin():
            self.login()
            self.browser.get(url)
        self.cookies = self.browser.get_cookies()
        self.lastUrl = url
        gc.collect()

    def toSession(self, curl=False):
        &#34;&#34;&#34;Return python session&#34;&#34;&#34;
        sessionObj = requests.session()
        if curl:
            agent = &#34;curl/7.54&#34;
        else:
            agent = self.browser.execute_script(&#34;return navigator.userAgent&#34;)
        sessionObj.headers = {&#34;User-Agent&#34;: agent}
        if len(self.cookies) &gt; 0:
            for c in self.cookies:
                sessionObj.cookies.set(c[&#34;name&#34;], c[&#34;value&#34;])
        if os.getenv(&#34;SSL_IGNORE&#34;, &#34;False&#34;).lower() in [&#34;1&#34;, &#34;true&#34;, &#34;t&#34;, &#34;y&#34;, &#34;yes&#34;]:
            sessionObj.verify = False
        return sessionObj

    def toSoup(self):
        &#34;&#34;&#34;get BeautifulSoup representation of currently loaded page&#34;&#34;&#34;
        return BeautifulSoup(self.browser.page_source, &#34;html.parser&#34;)

    def __del__(self):
        &#34;&#34;&#34;magic function to close the browser instance&#34;&#34;&#34;
        self.browser.quit()</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="Browser.Browser.app"><code class="name">var <span class="ident">app</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="Browser.Browser.appInfo"><code class="name">var <span class="ident">appInfo</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="Browser.Browser.browser"><code class="name">var <span class="ident">browser</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="Browser.Browser.cookies"><code class="name">var <span class="ident">cookies</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="Browser.Browser.lastUrl"><code class="name">var <span class="ident">lastUrl</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="Browser.Browser.sessionBaseHeaders"><code class="name">var <span class="ident">sessionBaseHeaders</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="Browser.Browser.apiGetInfo"><code class="name flex">
<span>def <span class="ident">apiGetInfo</span></span>(<span>self, apiUrl, returnResponse=False, session=None, curl=True)</span>
</code></dt>
<dd>
<div class="desc"><p>Function to gather information from API URL – if <code>returnResponse</code> is True, the whole request response is returned, otherwise only the decoded answer object</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def apiGetInfo(self, apiUrl, returnResponse=False, session=None, curl=True):
    &#34;&#34;&#34;Function to gather information from API URL – if `returnResponse` is True, the whole request response is returned, otherwise only the decoded answer object&#34;&#34;&#34;
    if session == None:
        session = self.toSession(curl=curl)
    rsp = session.get(apiUrl)
    if returnResponse:
        return rsp
    else:
        if rsp.status_code == 200:
            return json.loads(rsp.text)
        elif rsp.status_code == 404:
            return None
        else:
            raise Exception(
                &#34;Error while API fetch:\n======================\n\nResponse Code: {rc}\n\n{body}&#34;.format(
                    rc=rsp.status_code, body=rsp.text
                )
            )</code></pre>
</details>
</dd>
<dt id="Browser.Browser.appendSessionHeaders"><code class="name flex">
<span>def <span class="ident">appendSessionHeaders</span></span>(<span>self, headers=None)</span>
</code></dt>
<dd>
<div class="desc"><p>append session headers and retrieve them</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def appendSessionHeaders(self, headers=None):
    &#34;&#34;&#34;append session headers and retrieve them&#34;&#34;&#34;
    if headers is None:
        return self.sessionBaseHeaders
    else:
        for k, v in self.sessionBaseHeaders.items():
            if k not in headers:
                headers[k] = v
        return headers</code></pre>
</details>
</dd>
<dt id="Browser.Browser.checkElementByID"><code class="name flex">
<span>def <span class="ident">checkElementByID</span></span>(<span>self, ident)</span>
</code></dt>
<dd>
<div class="desc"><p>helper function to check if element (ID) exists on page</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def checkElementByID(self, ident):
    &#34;&#34;&#34;helper function to check if element (ID) exists on page&#34;&#34;&#34;
    try:
        self.browser.find_element(By.ID, ident)
    except NoSuchElementException:
        return False
    return True</code></pre>
</details>
</dd>
<dt id="Browser.Browser.checkElementByXpath"><code class="name flex">
<span>def <span class="ident">checkElementByXpath</span></span>(<span>self, xpath)</span>
</code></dt>
<dd>
<div class="desc"><p>helper function to check if element (XPATH) exists on page</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def checkElementByXpath(self, xpath):
    &#34;&#34;&#34;helper function to check if element (XPATH) exists on page&#34;&#34;&#34;
    try:
        self.browser.find_element(By.XPATH, xpath)
    except NoSuchElementException:
        return False
    return True</code></pre>
</details>
</dd>
<dt id="Browser.Browser.gatherAppInfo"><code class="name flex">
<span>def <span class="ident">gatherAppInfo</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>function to set application information</p>
<p>each <code>appInfo</code> has to be a dictionary with the following keys:
* <code>env</code> (MANDATORY – name of the corresponding environmental variable)
* <code>description</code> (MANDATORY – if the user is asked to enter the value, this information is shown)
* <code>password</code> (OPTIONAL – default <code>False</code>; if set <code>True</code>, the potential user input is hidden)
* <code>url</code> (OPTIONAL – default <code>False</code>; if set <code>True</code>, the <code>urlLastChar</code> is ensured to be last part of the value)
* <code>urlLastChar</code> (OPTIONAL – default <code>/</code>)
* <code>default</code> (OPTIONAL – default value for the app information; if set, the user won't be able to input the information)
<code>appInfo</code> itself is also a dictionary and the key <code>url</code> is mandatory, the keys <code>user</code> and <code>passwd</code> are highly recommended.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def gatherAppInfo(self):
    &#34;&#34;&#34;
    function to set application information

    each `appInfo` has to be a dictionary with the following keys:
      * `env` (MANDATORY – name of the corresponding environmental variable)
      * `description` (MANDATORY – if the user is asked to enter the value, this information is shown)
      * `password` (OPTIONAL – default `False`; if set `True`, the potential user input is hidden)
      * `url` (OPTIONAL – default `False`; if set `True`, the `urlLastChar` is ensured to be last part of the value)
      * `urlLastChar` (OPTIONAL – default `/`)
      * `default` (OPTIONAL – default value for the app information; if set, the user won&#39;t be able to input the information)
    `appInfo` itself is also a dictionary and the key `url` is mandatory, the keys `user` and `passwd` are highly recommended.
    &#34;&#34;&#34;
    self.app = {}
    for key, config in self.appInfo.items():
        value = None
        # relevant for asking for a password
        if &#34;password&#34; not in config:
            config[&#34;password&#34;] = False
        # relevant for formatting urls
        if &#34;url&#34; not in config:
            config[&#34;url&#34;] = False
        # relevant for formatting urls
        if &#34;urlLastChar&#34; not in config:
            config[&#34;urlLastChar&#34;] = &#34;/&#34;
        # relevant if there is a default value for this
        # setting in the specific browser
        if &#34;default&#34; not in config:
            config[&#34;default&#34;] = None
        # check for config
        if &#34;env&#34; in config:
            value = os.getenv(config[&#34;env&#34;], config[&#34;default&#34;])
        # ensure value not None
        if value == None:
            # ask for user input
            if config[&#34;password&#34;]:
                value = getpass.getpass(&#34;{d}: &#34;.format(d=config[&#34;description&#34;]))
            else:
                value = input(&#34;{d}: &#34;.format(d=config[&#34;description&#34;]))
        # adjust url
        if (
            config[&#34;url&#34;]
            and len(config[&#34;urlLastChar&#34;]) &gt; 0
            and value[-1] != config[&#34;urlLastChar&#34;]
        ):
            value += config[&#34;urlLastChar&#34;]
        # set value to app array
        self.app[key] = value</code></pre>
</details>
</dd>
<dt id="Browser.Browser.get"><code class="name flex">
<span>def <span class="ident">get</span></span>(<span>self, url, login=True)</span>
</code></dt>
<dd>
<div class="desc"><p>Get url in Browser</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get(self, url, login=True):
    &#34;&#34;&#34;Get url in Browser&#34;&#34;&#34;
    self.browser.get(url)
    if login and not self.checkLogin():
        self.login()
        self.browser.get(url)
    self.cookies = self.browser.get_cookies()
    self.lastUrl = url
    gc.collect()</code></pre>
</details>
</dd>
<dt id="Browser.Browser.loadCookies"><code class="name flex">
<span>def <span class="ident">loadCookies</span></span>(<span>self, givenCookies=None, url=None)</span>
</code></dt>
<dd>
<div class="desc"><p>function to load cookies from JSON string ENV variable <code>COOKIES</code> – or a given Python dictionary</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def loadCookies(self, givenCookies=None, url=None):
    &#34;&#34;&#34;function to load cookies from JSON string ENV variable `COOKIES` – or a given Python dictionary&#34;&#34;&#34;
    if givenCookies == None:
        givenCookies = json.loads(os.getenv(&#34;COOKIES&#34;, &#34;{}&#34;))
    if len(givenCookies) &gt; 0:
        self.setCookies(givenCookies, url)</code></pre>
</details>
</dd>
<dt id="Browser.Browser.refresh"><code class="name flex">
<span>def <span class="ident">refresh</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Reload page in Browser</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def refresh(self):
    &#34;&#34;&#34;Reload page in Browser&#34;&#34;&#34;
    currentUrl = self.browser.current_url
    self.get(currentUrl)
    # self.browser.refresh() # bricks sessionPostRequest calls ...</code></pre>
</details>
</dd>
<dt id="Browser.Browser.renew"><code class="name flex">
<span>def <span class="ident">renew</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Renew browser by closing and reopening it with restored Cookies</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def renew(self):
    &#34;&#34;&#34;Renew browser by closing and reopening it with restored Cookies&#34;&#34;&#34;
    try:
        self.browser.quit()
    except:
        pass
    self.startBrowser()
    self.browser.get(self.lastUrl)
    self.restoreCookies()</code></pre>
</details>
</dd>
<dt id="Browser.Browser.restoreCookies"><code class="name flex">
<span>def <span class="ident">restoreCookies</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Restore cookies on Browser</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def restoreCookies(self):
    &#34;&#34;&#34;Restore cookies on Browser&#34;&#34;&#34;
    for cookie in self.cookies:
        self.browser.add_cookie(cookie)</code></pre>
</details>
</dd>
<dt id="Browser.Browser.sessionGetRequest"><code class="name flex">
<span>def <span class="ident">sessionGetRequest</span></span>(<span>self, url, transferCookies=False, headers=None, curl=True, session=None)</span>
</code></dt>
<dd>
<div class="desc"><p>helper function to send GET request</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def sessionGetRequest(self, url, transferCookies=False, headers=None, curl=True, session=None):
    &#34;&#34;&#34;helper function to send GET request&#34;&#34;&#34;
    if session == None:
        session = self.toSession(curl=curl)
    headers = self.appendSessionHeaders(headers)
    if headers is not None:
        request = session.get(url, headers=headers)
    else:
        request = session.get(url)
    if transferCookies:
        # write Cookies from POST request to Selenium Browser
        new_cookies = session.cookies.get_dict()
        self.get(request.url, login=False)
        self.setCookies(new_cookies)
        self.refresh()
    return request</code></pre>
</details>
</dd>
<dt id="Browser.Browser.sessionPostRequest"><code class="name flex">
<span>def <span class="ident">sessionPostRequest</span></span>(<span>self, url, data, transferCookies=False, headers=None, curl=True, session=None, urlOverride=False)</span>
</code></dt>
<dd>
<div class="desc"><p>helper function to send POST request</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def sessionPostRequest(
    self,
    url,
    data,
    transferCookies=False,
    headers=None,
    curl=True,
    session=None,
    urlOverride=False,
):
    &#34;&#34;&#34;helper function to send POST request&#34;&#34;&#34;
    if session == None:
        session = self.toSession(curl=curl)
    headers = self.appendSessionHeaders(headers)
    if headers is not None:
        request = session.post(url, data=data, headers=headers)
    else:
        request = session.post(url, data=data)
    if transferCookies:
        # write Cookies from POST request to Selenium Browser
        new_cookies = session.cookies.get_dict()
        if urlOverride:
            self.get(url, login=False)
            self.setCookies(new_cookies, url=url)
        else:
            self.get(request.url, login=False)
            self.setCookies(new_cookies, url=request.url)
        self.refresh()
    return request</code></pre>
</details>
</dd>
<dt id="Browser.Browser.sessionPutRequest"><code class="name flex">
<span>def <span class="ident">sessionPutRequest</span></span>(<span>self, url, data, transferCookies=False, headers=None, curl=True, session=None)</span>
</code></dt>
<dd>
<div class="desc"><p>helper function to send PUT request</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def sessionPutRequest(
    self, url, data, transferCookies=False, headers=None, curl=True, session=None
):
    &#34;&#34;&#34;helper function to send PUT request&#34;&#34;&#34;
    if session == None:
        session = self.toSession(curl=curl)
    headers = self.appendSessionHeaders(headers)
    if headers is not None:
        request = session.put(url, data=data, headers=headers)
    else:
        request = session.put(url, data=data)
    if transferCookies:
        # write Cookies from POST request to Selenium Browser
        new_cookies = session.cookies.get_dict()
        self.get(request.url, login=False)
        self.setCookies(new_cookies)
        self.refresh()
    return request</code></pre>
</details>
</dd>
<dt id="Browser.Browser.setCookies"><code class="name flex">
<span>def <span class="ident">setCookies</span></span>(<span>self, cookieDict, url=None, returnSession=False, curl=True)</span>
</code></dt>
<dd>
<div class="desc"><p>helper function to set cookies on browser</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setCookies(self, cookieDict, url=None, returnSession=False, curl=True):
    &#34;&#34;&#34;helper function to set cookies on browser&#34;&#34;&#34;
    if url == None:
        url = self.app[&#34;url&#34;]
    # parsedUrl = urllib.parse.urlparse(url)
    # domain, path = [ parsedUrl.netloc, parsedUrl.path ]
    # if path == &#39;&#39;:
    #     path = &#39;/&#39;
    self.browser.get(url)
    for key, value in cookieDict.items():
        if os.getenv(&#34;PRINT_DEBUG_INFO&#34;, &#34;False&#34;).lower() in [&#34;1&#34;, &#34;true&#34;, &#34;t&#34;, &#34;y&#34;, &#34;yes&#34;]:
            print(&#34;Cookie is being set:&#34;)
            print({&#34;key&#34;: key, &#34;value&#34;: value})
            print()
        # # does no more work since Python / Selenium Cookies can only be set for loaded URLs anymore ...
        # self.browser.add_cookie( { &#34;name&#34;: key, &#34;value&#34;: value, &#34;domain&#34;: domain, &#34;path&#34;: path } )
        self.browser.add_cookie({&#34;name&#34;: key, &#34;value&#34;: value})
    self.browser.refresh()
    if returnSession:
        return self.toSession(curl=curl)</code></pre>
</details>
</dd>
<dt id="Browser.Browser.startBrowser"><code class="name flex">
<span>def <span class="ident">startBrowser</span></span>(<span>self, custom_capabilities={})</span>
</code></dt>
<dd>
<div class="desc"><p>Start Selenium browser</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def startBrowser(self, custom_capabilities={}):
    &#34;&#34;&#34;Start Selenium browser&#34;&#34;&#34;
    btype = os.getenv(&#34;SELENIUM_BROWSER_TYPE&#34;, &#34;FIREFOX&#34;)
    gridUrl = os.getenv(&#34;SELENIUM_GRID&#34;)

    if btype.lower() in [&#34;chrome&#34;]:
        capabilities = DesiredCapabilities.CHROME.copy()
    elif btype.lower() in [&#34;opera&#34;]:
        capabilities = DesiredCapabilities.OPERA.copy()
    elif btype.lower() in [&#34;safari&#34;]:
        capabilities = DesiredCapabilities.SAFARI.copy()
    else:
        capabilities = DesiredCapabilities.FIREFOX.copy()

    if os.getenv(&#34;SSL_IGNORE&#34;, &#34;False&#34;).lower() in [&#34;1&#34;, &#34;true&#34;, &#34;t&#34;, &#34;y&#34;, &#34;yes&#34;]:
        capabilities[&#34;acceptInsecureCerts&#34;] = True

    for key, value in custom_capabilities.items():
        capabilities[key] = value

    self.browser = webdriver.Remote(command_executor=gridUrl, desired_capabilities=capabilities)
    self.browser.set_script_timeout(os.getenv(&#34;SELENIUM_TIMEOUT&#34;, 30000))</code></pre>
</details>
</dd>
<dt id="Browser.Browser.toSession"><code class="name flex">
<span>def <span class="ident">toSession</span></span>(<span>self, curl=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Return python session</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def toSession(self, curl=False):
    &#34;&#34;&#34;Return python session&#34;&#34;&#34;
    sessionObj = requests.session()
    if curl:
        agent = &#34;curl/7.54&#34;
    else:
        agent = self.browser.execute_script(&#34;return navigator.userAgent&#34;)
    sessionObj.headers = {&#34;User-Agent&#34;: agent}
    if len(self.cookies) &gt; 0:
        for c in self.cookies:
            sessionObj.cookies.set(c[&#34;name&#34;], c[&#34;value&#34;])
    if os.getenv(&#34;SSL_IGNORE&#34;, &#34;False&#34;).lower() in [&#34;1&#34;, &#34;true&#34;, &#34;t&#34;, &#34;y&#34;, &#34;yes&#34;]:
        sessionObj.verify = False
    return sessionObj</code></pre>
</details>
</dd>
<dt id="Browser.Browser.toSoup"><code class="name flex">
<span>def <span class="ident">toSoup</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>get BeautifulSoup representation of currently loaded page</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def toSoup(self):
    &#34;&#34;&#34;get BeautifulSoup representation of currently loaded page&#34;&#34;&#34;
    return BeautifulSoup(self.browser.page_source, &#34;html.parser&#34;)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="Browser.APIError" href="#Browser.APIError">APIError</a></code></h4>
</li>
<li>
<h4><code><a title="Browser.Browser" href="#Browser.Browser">Browser</a></code></h4>
<ul class="">
<li><code><a title="Browser.Browser.apiGetInfo" href="#Browser.Browser.apiGetInfo">apiGetInfo</a></code></li>
<li><code><a title="Browser.Browser.app" href="#Browser.Browser.app">app</a></code></li>
<li><code><a title="Browser.Browser.appInfo" href="#Browser.Browser.appInfo">appInfo</a></code></li>
<li><code><a title="Browser.Browser.appendSessionHeaders" href="#Browser.Browser.appendSessionHeaders">appendSessionHeaders</a></code></li>
<li><code><a title="Browser.Browser.browser" href="#Browser.Browser.browser">browser</a></code></li>
<li><code><a title="Browser.Browser.checkElementByID" href="#Browser.Browser.checkElementByID">checkElementByID</a></code></li>
<li><code><a title="Browser.Browser.checkElementByXpath" href="#Browser.Browser.checkElementByXpath">checkElementByXpath</a></code></li>
<li><code><a title="Browser.Browser.cookies" href="#Browser.Browser.cookies">cookies</a></code></li>
<li><code><a title="Browser.Browser.gatherAppInfo" href="#Browser.Browser.gatherAppInfo">gatherAppInfo</a></code></li>
<li><code><a title="Browser.Browser.get" href="#Browser.Browser.get">get</a></code></li>
<li><code><a title="Browser.Browser.lastUrl" href="#Browser.Browser.lastUrl">lastUrl</a></code></li>
<li><code><a title="Browser.Browser.loadCookies" href="#Browser.Browser.loadCookies">loadCookies</a></code></li>
<li><code><a title="Browser.Browser.refresh" href="#Browser.Browser.refresh">refresh</a></code></li>
<li><code><a title="Browser.Browser.renew" href="#Browser.Browser.renew">renew</a></code></li>
<li><code><a title="Browser.Browser.restoreCookies" href="#Browser.Browser.restoreCookies">restoreCookies</a></code></li>
<li><code><a title="Browser.Browser.sessionBaseHeaders" href="#Browser.Browser.sessionBaseHeaders">sessionBaseHeaders</a></code></li>
<li><code><a title="Browser.Browser.sessionGetRequest" href="#Browser.Browser.sessionGetRequest">sessionGetRequest</a></code></li>
<li><code><a title="Browser.Browser.sessionPostRequest" href="#Browser.Browser.sessionPostRequest">sessionPostRequest</a></code></li>
<li><code><a title="Browser.Browser.sessionPutRequest" href="#Browser.Browser.sessionPutRequest">sessionPutRequest</a></code></li>
<li><code><a title="Browser.Browser.setCookies" href="#Browser.Browser.setCookies">setCookies</a></code></li>
<li><code><a title="Browser.Browser.startBrowser" href="#Browser.Browser.startBrowser">startBrowser</a></code></li>
<li><code><a title="Browser.Browser.toSession" href="#Browser.Browser.toSession">toSession</a></code></li>
<li><code><a title="Browser.Browser.toSoup" href="#Browser.Browser.toSoup">toSoup</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>